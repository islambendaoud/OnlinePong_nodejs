(()=>{"use strict";class t{constructor(t,s,i,h=0,e=0){this.y=s,this.x=t,this.img=new Image,this.img.src=i,this.shiftX=h,this.shiftY=e}get width(){return this.img.width}get height(){return this.img.height}move(){this.x=this.x+this.shiftX,this.y=this.y+this.shiftY}draw(t){t.drawImage(this.img,this.x,this.y)}stopMoving(){this.shiftX=0,this.shiftY=0}}const s=12;class i extends t{constructor(t,s,i){super(t,s,"./images/balle24.png",8,4),this.theGame=i}move(){this.y<=0||this.y+this.height>=this.theGame.canvas.height?this.shiftY=-this.shiftY:this.x+this.width>=this.theGame.canvas.width?(this.x=300,this.y=300,this.theGame.add(1),console.log("here 1")):this.x<=0&&(this.x=300,this.y=300,this.theGame.add(2),console.log("here 2")),super.move()}paddleitleft(t){let i=[Math.max(this.x,t.x),Math.max(this.y,t.y)],h=[Math.min(this.x+24,t.x+24),Math.min(this.y+24,t.y+72)];i[0]<h[0]&&i[1]<h[1]&&(0<t.y-this.y<Math.floor(12)?(this.shiftY=this.shiftY+1,this.shiftY>0?this.shiftX=s-this.shiftY:this.shiftX=s+this.shiftY):Math.floor(12)<t.y-this.y<2*Math.floor(12)?(this.shiftY=this.shiftY-1,this.shiftY>0?this.shiftX=s-this.shiftY:this.shiftX=s+this.shiftY):2*Math.floor(12)<t.y-this.y<4*Math.floor(12)?(this.shiftY=this.shiftY-2,this.shiftY>0?this.shiftX=s-this.shiftY:this.shiftX=s+this.shiftY):4*Math.floor(12)<t.y-this.y<5*Math.floor(12)?(this.shiftY=this.shiftY-1,this.shiftY>0?this.shiftX=s-this.shiftY:this.shiftX=s+this.shiftY):5*Math.floor(12)<t.y-this.y<72&&(this.shiftY=this.shiftY+1,this.shiftY>0?this.shiftX=s-this.shiftY:this.shiftX=s+this.shiftY))}paddleitright(t){let s=[Math.max(this.x,t.x),Math.max(this.y,t.y)],i=[Math.min(this.x+24,t.x+24),Math.min(this.y+24,t.y+72)];s[0]<i[0]&&s[1]<i[1]&&(0<t.y-this.y<Math.floor(12)?(this.shiftY=this.shiftY+1,this.shiftY>0?this.shiftX=-12+this.shiftY:this.shiftX=-12-this.shiftY):Math.floor(12)<t.y-this.y<2*Math.floor(12)?(this.shiftY=this.shiftY-1,this.shiftY>0?this.shiftX=-12+this.shiftY:this.shiftX=-12-this.shiftY):2*Math.floor(12)<t.y-this.y<4*Math.floor(12)?(this.shiftY=this.shiftY-2,this.shiftY>0?this.shiftX=-12+this.shiftY:this.shiftX=-12-this.shiftY):4*Math.floor(12)<t.y-this.y<5*Math.floor(12)?(this.shiftY=this.shiftY-1,this.shiftY>0?this.shiftX=-12+this.shiftY:this.shiftX=-12-this.shiftY):5*Math.floor(12)<t.y-this.y<72&&(this.shiftY=this.shiftY+1,this.shiftY>0?this.shiftX=-12+this.shiftY:this.shiftX=-12-this.shiftY))}}const h=2,e=3,a=4;class o extends t{constructor(t,s){super(t,s,"./images/paddle.png"),this.moving=h}moveUp(){this.shift=-8,this.moving=e}moveDown(){this.shift=8,this.moving=a}Up(){return this.moving===e}Down(){return this.moving===a}stopMoving(){this.shift=8,this.moving=h}move(t){this.Up()&&(this.y=Math.max(0,this.y+this.shift)),this.Down()&&(this.y=Math.min(t.height-40,this.y+this.shift))}}function n(t){t.started?(document.getElementById("start").value="jouer",t.stop(),console.log("hello from stop game ")):(t.start(),document.getElementById("start").value="stop",console.log("hello from start game"))}class d{first=0;second=0;started=!1;constructor(t){this.canvas=t,this.ball=new i(this.canvas.width/2,this.canvas.height/2,this),this.paddle=new o(5,Math.floor(this.canvas.height/2)),this.paddle2=new o(this.canvas.width-33,Math.floor(this.canvas.height/2)),this.ctxt=this.canvas.getContext("2d"),this.raf=window.requestAnimationFrame(this.drawpaddle.bind(this))}start(){this.started=!0,this.animate()}stop(){this.started=!1,window.cancelAnimationFrame(this.raf)}add(t){1==t&&(this.first=this.first+1,document.getElementById("score1").innerHTML=this.first.toString()),2==t&&(this.second=this.second+1,document.getElementById("score2").innerHTML=this.second.toString()),console.log("here"),n(this)}keyDownActionHandler(t){switch(t.key){case"ArrowUp":case"Up":this.paddle.moveUp(),this.paddle2.moveUp();break;case"ArrowDown":case"Down":this.paddle.moveDown(),this.paddle2.moveDown();break;default:return}}keyUpActionHandler(t){switch(t.key){case"ArrowUp":case"Up":case"ArrowDown":case"Down":this.paddle.stopMoving(),this.paddle2.stopMoving();break;default:return}t.preventDefault()}drawpaddle(){this.ctxt.clearRect(0,0,this.canvas.width,this.canvas.height),this.paddle.draw(this.ctxt),this.paddle2.draw(this.ctxt)}animate(){this.started&&(this.moveAndDraw(),this.raf=window.requestAnimationFrame(this.animate.bind(this)))}moveAndDraw(){this.ctxt.clearRect(0,0,this.canvas.width,this.canvas.height),this.ball.move(),this.ball.paddleitleft(this.paddle),this.ball.paddleitright(this.paddle2),this.ball.draw(this.ctxt),this.paddle.move(this.canvas),this.paddle.draw(this.ctxt),this.paddle2.move(this.canvas),this.paddle2.draw(this.ctxt)}}window.addEventListener("load",(()=>{const t=document.getElementById("field"),s=new d(t);s.drawpaddle(),window.addEventListener("keydown",s.keyDownActionHandler.bind(s)),window.addEventListener("keyup",s.keyUpActionHandler.bind(s)),document.getElementById("start").addEventListener("click",(()=>n(s))),document.addEventListener("keydown",(t=>{"Space"===t.code&&n(s)}))}))})();